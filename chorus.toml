# Chorus Configuration
# Server configuration for the Chorus orchestrator.
# tmux sessions use environment variables as needed.

[server]
host = "127.0.0.1"
port = 8000

[database]
url = "sqlite:///orchestrator.db"

[tmux]
session_prefix = "claude"
poll_interval = 1.0

[editor]
command = "vim"

[documents]
patterns = [
    "*.md",
    "docs/**/*.md",
    ".claude/**/*.md",
    "plans/**/*.md",
    "specs/**/*.md",
]

[status.idle]
patterns = [
    '>\\s*$',
    'claude>\\s*$',
]

[status.waiting]
patterns = [
    '\\(y/n\\)',
    'Allow\\?',
    'Do you want to',
    'Proceed\\?',
    'Press Enter',
    'Continue\\?',
]

[status_polling]
# Hybrid status detection: hooks (fast) + polling (safety net)
enabled = true
interval = 5.0           # Poll every 5 seconds to verify status
frozen_threshold = 300.0 # Warn if Claude busy > 5 minutes

[notifications]
enabled = true

[logging]
level = "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
log_subprocess = true  # Log external tool invocations (tmux, GitButler CLI, ttyd)
log_api_requests = true  # Log API endpoint calls

[monitoring]
# JSON-based monitoring (new architecture)
use_json_mode = true  # Set to true to use JSON event parsing instead of hooks
poll_interval = 1.0   # Seconds between monitoring cycles
